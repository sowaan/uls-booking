{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-07-02 11:14:43.164009",
 "css": ".set-padd td {\n    padding: 0 !important;\n}\n.set-padd thead td {\n    padding: 2px !important;\n    background-color: whitesmoke;\n    text-align:center;\n}\n",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Sales Invoice PDF",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\"}]",
 "html": "<div style=\"font-size:15pt;text-align:center;width:100%;font-weight:bold;color:#23262D;\">Sales Tax Invoice<br><span  style=\"font-size:12pt;\">{{ doc.name }}</span></div>\n<div style=\"font-size:9pt;text-align:center;width:100%;\"><b>Date Type:</b> {{ doc.date_type }} &emsp; <b> From Date:</b> {{ doc.start_date }} &emsp; <b> To Date:</b> {{ doc.end_date }} </div>\n\n{% set comp_name = frappe.db.get_single_value('Manifest Setting Definition', 'default_company') %}\n{% for row in doc.customer_with_sales_invoice %}\n    {% if row.include_in_print %}\n\n        {% set sales_invoices_string = row.sales_invoices %}\n        {% if sales_invoices_string %}\n            {% set sales_invoices_list = sales_invoices_string.split(', ') %}\n        {% else %}\n            {% set sales_invoices_list = none %}\n        {% endif %}\n        {% set cust_things = frappe.db.get_value(\"Customer\", row.customer, [\"tax_id\", \"custom_strn\", \"customer_primary_address\"], as_dict = True) %}\n        {% set comp_things = frappe.db.get_value(\"Company\", comp_name,  [\"tax_id\", \"custom_strn\", \"custom_hs_code\"], as_dict = True) %}\n\n        <div style=\"width:100%;page-break-after: always;\">\n            <div style=\"width:100%;\">\n                 <div style=\"width:50%;text-align:right;float:right;\">\n                    <table style=\"width:100%;color:#23262D;\">\n                        <tr>\n                            <td style=\"padding:0 !important;\">\n                                <span style=\"font-size:8pt;\">Sales Tax Reg. No:{{comp_things.custom_strn if comp_things.custom_strn else \"\"}}</span>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td style=\"padding:0 !important;\">\n                                <span style=\"font-size:8pt;\">N.T.N No:{{comp_things.tax_id if comp_things.tax_id else \"\"}}</span>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td style=\"padding:0 !important;\">\n                                <span style=\"font-size:8pt;\">H.S.CODE = {{comp_things.custom_hs_code if comp_things.custom_hs_code else \"\"}}</span>\n                            </td>\n                        </tr>\n                       \n                        <tr>\n                            <td style=\"padding:0 !important;\">\n                                <span style=\"font-size:8pt;font-weight:bold;\">Date:{{doc.end_date}}</span>\n                            </td>\n                        </tr>\n                    </table>\n                </div>\n                <div style=\"width:50%;\">\n                    <table style=\"width:100%;color:#23262D;\">\n                        \n                        <tr>\n                            <td style=\"padding:0 !important;\">\n                                <span style=\"font-size:8pt;font-weight:bold;\"> {{ row.customer }}</span>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td style=\"padding:0 !important;\">\n                                <span style=\"font-size:8pt;\"><b>Sr. No</b>  {{ row.name1 }}</span>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td style=\"padding:0 !important;\">\n                                <span style=\"font-size:8pt;\">{{ cust_things.customer_primary_address if cust_things.customer_primary_address else '' }}</span>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td style=\"padding:0 !important;\">\n                                <span style=\"font-size:8pt;\">NTN No: {{cust_things.tax_id if cust_things.tax_id else \"\"}}</span>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td style=\"padding:0 !important;\">\n                                <span style=\"font-size:8pt;\">Sales Tax Reg No:{{cust_things.custom_strn if cust_things.custom_strn else \"\"}}</span>\n                            </td>\n                        </tr>\n                    </table>\n                </div>\n            \n               \n            </div>\n            \n            \n            <div>\n                <table style = \"border:1px solid #E0E1E6;font-color:#23262D;font-size:6pt;\" class=\"set-padd\">\n                    <thead>\n                        <tr>\n                            <td style= \"font-weight:bold;font-size:6pt;border:1px solid #E0E1E6;\">\n                                S.No\n                            </td>\n                            <td style= \"font-weight:bold;font-size:6pt;border:1px solid #E0E1E6;\">\n                                Shipment Date\n                            </td>\n                            <td style= \"font-weight:bold;font-size:6pt;border:1px solid #E0E1E6;\">\n                                Tracking No\n                            </td>\n                            <td style= \"font-weight:bold;font-size:6pt;border:1px solid #E0E1E6;\" >\n                                Weight\n                            </td>\n                            <td style= \"font-weight:bold;font-size:6pt;border:1px solid #E0E1E6;\">\n                                Goods Desc.\n                            </td>\n                            <td style= \"font-weight:bold;font-size:6pt;border:1px solid #E0E1E6;\">\n                                Zone\n                            </td>\n                            <td style= \"font-weight:bold;font-size:6pt;border:1px solid #E0E1E6;\">\n                                Destination\n                            </td>\n                            <td style= \"font-weight:bold;font-size:6pt;border:1px solid #E0E1E6;\">\n                                Freight USD\n                            </td>\n                            <td style= \"font-weight:bold;font-size:6pt;border:1px solid #E0E1E6;\">\n                                Other Charges USD\n                            </td>\n                            <td style= \"font-weight:bold;font-size:6pt;border:1px solid #E0E1E6;\">\n                                Fuel Surcharge USD\n                            </td>\n                            <td style= \"font-weight:bold;font-size:6pt;border:1px solid #E0E1E6;\">\n                                Shipping Bill Charges USD\n                            </td>\n                            <td style= \"font-weight:bold;font-size:6pt;border:1px solid #E0E1E6;\">\n                                INS. USD\n                            </td>\n                            <td style= \"font-weight:bold;font-size:6pt;border:1px solid #E0E1E6;\">\n                                Total USD\n                            </td>\n                            <td style= \"font-weight:bold;font-size:6pt;border:1px solid #E0E1E6;\">\n                                Conv Rate\n                            </td>\n                            <td style= \"font-weight:bold;font-size:6pt;border:1px solid #E0E1E6;\">\n                                Bill Before Sales Tax PKR\n                            </td>\n                            <td style= \"font-weight:bold;font-size:6pt;border:1px solid #E0E1E6;\">\n                                Sales Tax PKR\n                            </td>\n                            <td style= \"font-weight:bold;font-size:6pt;border:1px solid #E0E1E6;\">\n                                Bill After Sales Tax\n                            </td>\n                            \n                        </tr>\n                    </thead>\n                    {% set ns_t = namespace( total_gt = 0 ) %}\n                    {% for invoice in sales_invoices_list %}\n                        {% set invoice_docc = frappe.get_doc(\"Sales Invoice\", invoice) or frappe._dict({}) %}\n                        {% set items = invoice_docc.get('items', []) %}\n                        {% set taxes = invoice_docc.get('taxes', []) %}\n                        {% set amounts = namespace(S=0, OC=0, FSC=0, SBC=0, INS=0, tax=0, total=0) %}\n                        \n                        {% for item in items %}\n                            {% if item.get('item_code') == \"FSC\" %}\n                                {% set amounts.FSC = amounts.FSC + (item.get('amount') or 0) %}\n                            {% elif item.get('item_code') == \"OSC\" %}\n                                {% set amounts.OC = amounts.OC + (item.get('amount') or 0) %}\n                            {% elif item.get('item_code') == \"FCHG\" %}\n                                {% set amounts.S = amounts.S + (item.get('amount') or 0) %}\n                            {% elif item.get('item_code') == \"SBC\" %}\n                                {% set amounts.SBC = amounts.SBC + (item.get('amount') or 0) %}\n                            {% elif item.get('item_code') == \"Ins\" %}\n                                {% set amounts.INS = amounts.INS + (item.get('amount') or 0) %}\n                            {% endif %}\n                        {% endfor %}\n                        \n                        {% if taxes and taxes[0] %}\n                            {% set amounts.tax = (taxes[0].get('rate') or 0) / 100 %}\n                        {% endif %}\n                        \n                        {% set discount_amount = invoice_docc.get('discount_amount') or 0 %}\n                        {% set subtotal = (amounts.S - discount_amount) + amounts.OC + amounts.FSC + amounts.SBC + amounts.INS %}\n                        {% set conversion_rate = invoice_docc.get('plc_conversion_rate') or 1 %}\n                        {% set subtotal_converted = subtotal * conversion_rate %}\n                        {% set tax_amount = subtotal_converted * amounts.tax %}\n                        {% set grand_total = subtotal_converted * (1 + amounts.tax) %}\n                        {% set shipment_type = invoice_docc.get('custom_shipment_type') or '' %}\n                        {% set ns_t.total_gt = ns_t.total_gt + grand_total %}\n                        {% set shipment_display = {\n                            'NON-DOCUMENTS': 'Non-Doc',\n                            'DOCUMENTS': 'Docs',\n                            'LETTERS': 'Lett',\n                            'PARCEL': 'Pcl'\n                        }.get(shipment_type, shipment_type) %}\n                        <tr>\n                            <td style=\"text-align:center;padding:0 !important;font-size:6pt;border:1px solid #E0E1E6;\">\n                                {{ loop.index }}\n                            </td>\n                            <td style=\"text-align:center;padding:0 !important;font-size:6pt;border:1px solid #E0E1E6;\">\n                                {{ invoice_docc.get('posting_date') or '' }}\n                            </td>\n                            <td style=\"text-align:center;padding:0 !important;font-size:6pt;border:1px solid #E0E1E6;\">\n                                {{ invoice_docc.get('custom_tracking_number') or '' }}\n                            </td>\n                            <td style=\"text-align:right;padding:0 !important;font-size:6pt;border:1px solid #E0E1E6;\">\n                                {{ invoice_docc.get('custom_shipment_weight') or 0 }}\n                            </td>\n                            <td style=\"padding:0 !important;text-align:center;font-size:6pt;border:1px solid #E0E1E6;\">\n                                {{ shipment_display }}\n                            </td>\n                            <td style=\"text-align:center;padding:0 !important;font-size:6pt;border:1px solid #E0E1E6;\">\n                                {{ invoice_docc.get('custom_zone') or '' }}\n                            </td>\n                            <td style=\"text-align:center;padding:0 !important;font-size:6pt;border:1px solid #E0E1E6;\">\n                                {{ invoice_docc.get('custom_consignee_country') or '' }}\n                            </td>\n                        \n                            <td style=\"text-align:right;padding:0 !important;font-size:6pt;border:1px solid #E0E1E6;\">\n                                {{ '{:,.2f}'.format(amounts.S - discount_amount) }}\n                            </td>\n                            <td style=\"text-align:right;padding:0 !important;font-size:6pt;border:1px solid #E0E1E6;\">\n                                {{ '{:,.2f}'.format(amounts.OC) }}\n                            </td>\n                            <td style=\"text-align:right;padding:0 !important;font-size:6pt;border:1px solid #E0E1E6;\">\n                                {{ '{:,.2f}'.format(amounts.FSC) }}\n                            </td>\n                            <td style=\"text-align:right;padding:0 !important;font-size:6pt;border:1px solid #E0E1E6;\">\n                                {{ '{:,.2f}'.format(amounts.SBC) }}\n                            </td>\n                            <td style=\"text-align:right;padding:0 !important;font-size:6pt;border:1px solid #E0E1E6;\">\n                                {{ '{:,.2f}'.format(amounts.INS) }}\n                            </td>\n                        \n                            <td style=\"padding:0 !important;font-size:6pt;border:1px solid #E0E1E6;text-align:right;\">\n                                {{ '{:,.2f}'.format(subtotal) }}\n                            </td>\n                            <td style=\"text-align:right;padding:0 !important;font-size:6pt;border:1px solid #E0E1E6;\">\n                                {{ conversion_rate }}\n                            </td>\n                            <td style=\"text-align:right;padding:0 !important;font-size:6pt;border:1px solid #E0E1E6;\">\n                                {{ '{:,.2f}'.format(subtotal_converted) }}\n                            </td>\n                            <td style=\"text-align:right;padding:0 !important;font-size:6pt;border:1px solid #E0E1E6;\">\n                                {{ '{:,.2f}'.format(tax_amount) }}\n                            </td>\n                            <td style=\"text-align:right;padding:0 !important;font-size:6pt;border:1px solid #E0E1E6;\">\n                                {{ '{:,.2f}'.format(grand_total) }}\n                            </td>\n                        </tr>\n                    {% endfor %}\n                </table>\n                <div style=\"width:100%;text-align:right;font-weight:bold;font-size:7pt;\"> {{ '{:,.2f}'.format(ns_t.total_gt) if ns_t.total_gt else 0 }}&nbsp; </div>\n            </div>\n        </div>\n        {% endif %}\n    {% endfor %}\n        ",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-07-07 18:23:04.880137",
 "modified_by": "Administrator",
 "module": "ULS Booking",
 "name": "Specific Customer Sales Invoice Tax",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}